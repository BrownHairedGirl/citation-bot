branches:
  except: release

sudo: false 
dist: trusty
language: php
matrix:
  include:
    - php: 7.0
      install: pecl install oauth
    - php: 5.6
      install: pecl install oauth-1.2.3
git:
  depth: 3

before-script:  
  - travis_retry composer self-update
  - travis_retry composer install --no-interaction --prefer-source --dev
  
script:
  - phpunit --coverage-clover coverage.xml --bootstrap expandFns.php tests/phpunit

after_success:
  - bash <(curl -s https://codecov.io/bash)